{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/common_style.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <title>Shop them all!</title>
</head>
<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Shop them all</a>
            </div>
            <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="#./login.html"><span class="glyphicon glyphicon-user"></span> Register</a></li>
                <li><a href="./realogin.html"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                <li><a href = "#"><span class = "glyphicon glyphicon-shopping-cart"><span class = "badge"> X </span></span></a></li>
            </ul>

            <form class="navbar-form navbar-left" action="/action_page.php">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="search">
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </nav>
    <div id="wrapper">
        <!-- Sidebar -->
            <nav id="spy">
                <ul id="ShopsUl" class="sidebar-nav nav">
                    <li class="sidebar-brand">
                        <a href="#home"><span class="fa fa-home solo">Stores</span></a>
                    </li>
                    {%for shop in all_shops%}
                    <li>
                        <a id="{{shop.name}}" onclick="MarkMeOnMap('{{shop.name}}')" data-scroll>
                            <span class="fa fa-anchor solo">{{shop.name}}</span>
                        </a>
                    </li>
                    {%endfor%}
                </ul>
            </nav>
    </div>

    <div id="shopMap">
        <img id="imgMap" src = "{% static 'images/map.png' %}"/>
    </div>




    <footer class="container-fluid text-center">
        <p>@Copyright 2019 ShopThemAll</p>
    </footer>

</body>
</html>

<script type="text/javascript">


    var jsonMap = JSON.parse('{{ shops_map | escapejs }}');

    function removeElementsByClass(className){
      var elements = document.getElementsByClassName(className);
     while(elements.length > 0){
            elements[0].parentNode.removeChild(elements[0]);
     }
    }

    function MarkMeOnMap(shop_name)
    {
        removeElementsByClass('location_pin');
        var img = new Image();
        img.src = "{% static 'images/location_pin.png' %}";
        img.className  = "location_pin";
        var div = document.getElementById('shopMap');
        div.appendChild(img);
        img.style.position =  "absolute";
        img.style.left = jsonMap[shop_name][0] + document.getElementById('imgMap').offsetLeft  + 'px';
        img.style.top = jsonMap[shop_name][1] + document.getElementById('imgMap').offsetTop + 'px';
        img.style.width = '25px';
        img.style.height = '25px';
    }



</script>